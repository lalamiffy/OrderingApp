{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _wrapNativeSuper from \"@babel/runtime/helpers/wrapNativeSuper\";\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport { getToken, storeToken } from \"./TokenStorage\";\nvar BASE_URL = 'http://localhost:3913';\nvar ApiError = function (_Error) {\n  _inherits(ApiError, _Error);\n  var _super = _createSuper(ApiError);\n  function ApiError(validationErrors) {\n    var _this;\n    _classCallCheck(this, ApiError);\n    for (var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      params[_key - 1] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(params));\n    _this.validationErrors = validationErrors;\n    return _this;\n  }\n  return _createClass(ApiError);\n}(_wrapNativeSuper(Error));\nfunction flattenModelStateErrors(modelStateErrors) {\n  var validationErrors = [];\n  for (var property in modelStateErrors) {\n    for (var modelStateError of modelStateErrors[property]) {\n      validationErrors.push(modelStateError);\n    }\n  }\n  return validationErrors;\n}\nexport function getTableData() {\n  return _getTableData.apply(this, arguments);\n}\nfunction _getTableData() {\n  _getTableData = _asyncToGenerator(function* () {\n    var url = new URL('api/v1/order/tables', BASE_URL);\n    var response = yield fetch(url, {\n      method: 'GET'\n    });\n    var data = yield response.json();\n    return data;\n  });\n  return _getTableData.apply(this, arguments);\n}\nexport function startNewOrder(_x) {\n  return _startNewOrder.apply(this, arguments);\n}\nfunction _startNewOrder() {\n  _startNewOrder = _asyncToGenerator(function* (order) {\n    var finalUrl = new URL('api/v1/order/start', BASE_URL);\n    var response = yield fetch(finalUrl, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(order)\n    });\n    if (response.status === 400) {\n      var modelStateErrors = yield response.json();\n      var validationErrors = flattenModelStateErrors(modelStateErrors);\n      throw new ApiError(validationErrors, \"There was an error saving the order\");\n    }\n    return yield response.json();\n  });\n  return _startNewOrder.apply(this, arguments);\n}\nexport function getOrderData() {\n  return _getOrderData.apply(this, arguments);\n}\nfunction _getOrderData() {\n  _getOrderData = _asyncToGenerator(function* () {\n    var url = new URL('api/v1/order', BASE_URL);\n    var token = yield getToken();\n    var response = yield fetch(url, {\n      method: 'GET',\n      headers: {\n        \"Authorization\": \"Bearer \" + token\n      }\n    });\n    if (response.status === 401) {\n      throw new Error('You must be authenticated to access this resource!');\n    } else if (response.status === 403) {\n      throw new Error('You do not have the authorization to access this resource!');\n    }\n    var data = yield response.json();\n    return data;\n  });\n  return _getOrderData.apply(this, arguments);\n}","map":{"version":3,"names":["getToken","storeToken","BASE_URL","ApiError","_Error","_inherits","_super","_createSuper","validationErrors","_this","_classCallCheck","_len","arguments","length","params","Array","_key","call","apply","concat","_createClass","_wrapNativeSuper","Error","flattenModelStateErrors","modelStateErrors","property","modelStateError","push","getTableData","_getTableData","_asyncToGenerator","url","URL","response","fetch","method","data","json","startNewOrder","_x","_startNewOrder","order","finalUrl","headers","body","JSON","stringify","status","getOrderData","_getOrderData","token"],"sources":["D:/Download/6.13WebVersion/6.13WebVersion/services/OrderService.js"],"sourcesContent":["import { getToken, storeToken } from \"./TokenStorage\";\r\n\r\n//const BASE_URL = 'http://10.0.2.2:3912'; //5136\r\n//const BASE_URL = 'https://iron-girl.azurewebsites.net/'\r\nconst BASE_URL = 'http://localhost:3913'\r\n\r\nclass ApiError extends Error {\r\n    constructor(validationErrors, ...params) {\r\n        super(...params);\r\n\r\n        this.validationErrors = validationErrors;\r\n    }\r\n}\r\n\r\nfunction flattenModelStateErrors(modelStateErrors) {\r\n    const validationErrors = [];\r\n\r\n    for (const property in modelStateErrors) {\r\n        for (const modelStateError of modelStateErrors[property]) {\r\n            validationErrors.push(modelStateError);\r\n        }\r\n    }\r\n    return validationErrors;\r\n}\r\n\r\nexport async function getTableData() {\r\n    const url = new URL('api/v1/order/tables', BASE_URL);\r\n   \r\n\r\n    const response = await fetch(url, {\r\n        method: 'GET',\r\n\r\n        // headers: {\r\n        //     \"Authorization\": `Bearer ${token}`\r\n        // }\r\n        \r\n    });\r\n\r\n    \r\n\r\n    const data = await response.json();\r\n    \r\n    return data;\r\n}\r\n\r\nexport async function startNewOrder(order) {\r\n    const finalUrl = new URL('api/v1/order/start', BASE_URL);\r\n\r\n    const response = await fetch(finalUrl, {\r\n        method: \"POST\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify(order)\r\n    });\r\n\r\n    if (response.status === 400) {\r\n        const modelStateErrors = await response.json();\r\n\r\n        const validationErrors = flattenModelStateErrors(modelStateErrors);\r\n\r\n        throw new ApiError(validationErrors,\r\n            \"There was an error saving the order\"\r\n        );\r\n    }\r\n\r\n    return await response.json();\r\n}\r\n\r\n\r\nexport async function getOrderData() {\r\n    const url = new URL('api/v1/order', BASE_URL);\r\n    const token = await getToken();\r\n\r\n    const response = await fetch(url, {\r\n        method: 'GET',\r\n        headers: {\r\n            \"Authorization\": `Bearer ${token}`\r\n        }\r\n    });\r\n\r\n    if (response.status === 401) {\r\n        throw new Error('You must be authenticated to access this resource!');\r\n    } else if (response.status === 403) {\r\n        throw new Error('You do not have the authorization to access this resource!');\r\n    }\r\n\r\n    const data = await response.json();\r\n    \r\n    return data;\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}